<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>queue</title>
    <style>
        div {
            background-color: green;
            width: 50px;
            height: 50px;
            position:relative;
        }

        .class1 {
            background-color: yellow;
        }

        .class2 {
            background-color: red;
        }
    </style>

    <script src="../jquery.1.11.1.js"></script>

    <script>
        $(function () {

            $("div").hide();

            $("button").click(function () {

                $("div")
                .show()
                .animate({ left: "+=200px" }, 2000)
                .queue(function () {
                    $(this).addClass("class1").dequeue();
                    // функция добавленная в очередь, обязательно должна быть удалена из очереди, для того чтобы продолжились вызываться следующие функции.
                }).
                animate({ left: "-=200px" }, 2000).
                queue(function () {
                    $(this).removeClass("class1").addClass("class2").dequeue();
                })
                .slideUp("slow");

            });
        });
    </script>

</head>
<body>
    <button>Start</button>
    <div></div>
</body>
</html>
